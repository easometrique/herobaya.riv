<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Baya Rive Demo</title>
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      background: #f5f5f5;
    }
    .wrap {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      height: 100%;
    }
    canvas {
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <!-- Your canvas -->
  <div class="wrap">
    <canvas id="stage"></canvas>
  </div>

  <!-- Rive + script -->
  <script src="https://unpkg.com/@rive-app/canvas@2.15.0"></script>
  <script>
    const RIV_URL  = 'https://easometrique.github.io/herobaya.riv/baya_hero_project.riv?v=' + Date.now();
    const ARTBOARD = 'Desktop - 1';
    const STATE_MACHINE = 'HeroMachine';

    const ART_W = 1440, ART_H = 1024;

    const canvas = document.getElementById('stage') || document.getElementById('riveCanvas');

    if (!canvas) {
      console.error('Canvas element not found. Add <canvas id="stage"></canvas> to the HTML.');
    } else {
      let app;

      function resizeCanvas() {
        if (!canvas) return;
        const dpr  = window.devicePixelRatio || 1;
        const cssW = canvas.clientWidth || 1200;
        const cssH = Math.round(cssW * (ART_H / ART_W));

        canvas.style.width  = cssW + 'px';
        canvas.style.height = cssH + 'px';
        canvas.width  = Math.round(cssW * dpr);
        canvas.height = Math.round(cssH * dpr);

        if (app) app.resizeDrawingSurfaceToCanvas();
      }

      function init() {
        try {
          app = new rive.Rive({
            src: RIV_URL,
            canvas: canvas,
            artboard: ARTBOARD,
            stateMachines: STATE_MACHINE,
            autoplay: true,
            fit: rive.Fit.CONTAIN,
            alignment: rive.Alignment.center,
            onLoad: () => {
              resizeCanvas();
              const inputs = app.stateMachineInputs(STATE_MACHINE) || [];
              console.log('Rive ready:', { ARTBOARD, STATE_MACHINE });
              console.log('[SM inputs]', inputs.map(i => `${i.name} (${i.type})`));
            }
          });

          resizeCanvas();
          window.addEventListener('resize', resizeCanvas);
        } catch (e) {
          console.error('Rive init error:', e);
        }
      }

      init();
    }
  </script>
</body>
</html>
