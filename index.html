<script src="https://unpkg.com/@rive-app/canvas@2.15.0"></script>
<script>
const RIV_URL = "https://easometrique.github.io/herobaya.riv/baya_hero_project.riv?" + Date.now();
const ARTBOARD = "Desktop - 1";
const STATE_MACHINE = "HeroMachine";
const ART_W = 1440, ART_H = 1024;  // your artboard size

const canvas = document.getElementById("riveCanvas");

async function init() {
  try {
    const app = new rive.Rive({
      src: RIV_URL,
      canvas: canvas,
      artboard: ARTBOARD,
      stateMachines: STATE_MACHINE,
      autoplay: true,
      onLoad: () => {
        console.log("Rive ready:", { ARTBOARD, STATE_MACHINE });
        console.log("[SM inputs]", app.stateMachineInputs(STATE_MACHINE));
        resizeCanvas(app);
      }
    });
    window.riveApp = app;
  } catch (e) {
    console.error("Rive init error:", e);
  }
}

function resizeCanvas(app) {
  const dpr = window.devicePixelRatio || 1;
  const cssw = window.innerWidth;
  const cssh = (ART_H / ART_W) * cssw; // scale with aspect ratio
  canvas.width = Math.round(cssw * dpr);
  canvas.height = Math.round(cssh * dpr);
  canvas.style.width = cssw + "px";
  canvas.style.height = cssh + "px";
  if (app) app.resizeToDrawingSurface();
}

init();
window.addEventListener("resize", () => resizeCanvas(window.riveApp));
</script>
